<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>Carte Interactive UNESCO</title>
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    <style>
        html, body { width: 100%; height: 100%; margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; right: 0; left: 0; }
        #sidebar {
            position: absolute;
            top: 0;
            right: 0;
            width: 30%;
            height: 100%;
            background: white;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow: auto;
            display: none; /* Cach√© par d√©faut */
        }
        #toggle-sidebar {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 2000;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        #sidebar #map-sidebar {
            width: 100%;
            height: 300px; /* Ajustez selon vos besoins */
        }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
</head>
<body>
    <!-- Carte principale -->
    <div id="map"></div>

    <!-- Bouton pour ouvrir/fermer le panneau -->
    <div id="toggle-sidebar">üìä Donn√©es climatiques</div>

    <!-- Panneau glissant -->
    <div id="sidebar">
        <h3>Indicateurs G√©ologiques</h3>
        <p>Voici une carte d√©di√©e aux indicateurs du r√©chauffement climatique en France.</p>
        <div id="map-sidebar"></div>
    </div>

    <script>
        // Initialiser la carte principale
        var map = L.map('map').setView([46.603354, 1.888334], 6);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);

        // Tous les sites UNESCO
        var unescoSites = [
            { name: "Mont Saint-Michel", lat: 48.636, lon: -1.511, image: "" },
            { name: "Cath√©drale de Chartres", lat: 48.447, lon: 1.484, image: "" },
            { name: "Palais et parc de Versailles", lat: 48.8049, lon: 2.1204, image: "" },
            { name: "Cath√©drale d'Amiens", lat: 49.895, lon: 2.302, image: "" },
            { name: "Cit√© m√©di√©vale de Carcassonne", lat: 43.211, lon: 2.352, image: "" },
            { name: "Pont du Gard", lat: 43.947, lon: 4.535, image: "" },
            { name: "Chemins de Saint-Jacques-de-Compostelle", lat: 43.6045, lon: 1.4442, image: "" },
            { name: "Bordeaux, Port de la Lune", lat: 44.8378, lon: -0.5792, image: "" },
            { name: "Th√©√¢tre antique d'Orange", lat: 44.136, lon: 4.8055, image: "" },
            { name: "Sites palafittiques pr√©historiques autour des Alpes", lat: 45.8992, lon: 6.1296, image: "" }
        ];

        // Ajouter les marqueurs pour tous les sites
        unescoSites.forEach(function(site) {
            L.marker([site.lat, site.lon]).addTo(map)
                .bindPopup(`<b>${site.name}</b><br>${site.image ? `<img src="${site.image}" width="200">` : ''}`);
        });

        // Initialiser la carte secondaire dans le panneau lat√©ral
        var sidebarMap;
        function initSidebarMap() {
            sidebarMap = L.map('map-sidebar').setView([46.603354, 1.888334], 6);
            L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
                maxZoom: 17,
                attribution: '¬© OpenTopoMap contributors'
            }).addTo(sidebarMap);

            // Exemple de zones climatiques
            L.circle([48.8566, 2.3522], { color: 'red', radius: 50000 }).addTo(sidebarMap).bindPopup("Risque de canicule √† Paris");
            L.circle([43.6045, 1.4442], { color: 'blue', radius: 30000 }).addTo(sidebarMap).bindPopup("Zone inondable √† Toulouse");
        }

        // Toggle du panneau
        var sidebarVisible = false;
        document.getElementById('toggle-sidebar').onclick = function() {
            var sidebar = document.getElementById('sidebar');
            if (!sidebarVisible) {
                sidebar.style.display = 'block';
                if (!sidebarMap) initSidebarMap(); // Initialiser la carte uniquement lors de la premi√®re ouverture
            } else {
                sidebar.style.display = 'none';
            }
            sidebarVisible = !sidebarVisible;
        };
    </script>
</body>
</html>
